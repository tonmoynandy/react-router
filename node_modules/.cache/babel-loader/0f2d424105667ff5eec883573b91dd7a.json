{"ast":null,"code":"var _jsxFileName = \"D:\\\\MY_WORK\\\\react-routing-test\\\\src\\\\components\\\\elements\\\\Posts.js\";\nimport React from 'react';\nimport { Link } from 'react-router-dom';\nimport { DbHelper } from '../../DbHelper';\nimport Comments from './Comments';\nimport Moment from 'react-moment';\n\nclass Posts extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.commentDisplay = postIndex => {\n      let commentdisplayArr = this.state.commentDisplay;\n      let index = commentdisplayArr.indexOf(postIndex);\n\n      if (index === -1) {\n        commentdisplayArr.push(postIndex);\n      } else {\n        commentdisplayArr.splice(index, 1);\n      }\n\n      this.setState({\n        commentDisplay: commentdisplayArr\n      });\n    };\n\n    this.handelCommentResponse = response => {\n      let userPosts = this.props.posts;\n      let postIndex = userPosts.findIndex(i => {\n        return i._id === response;\n      });\n      this.props.posts[postIndex].comments = userPosts[postIndex].comments + 1; // this.props.dispatch({\n      //     type: 'USER_POST',\n      //     userPosts\n      // })\n    };\n\n    this.state = {\n      commentDisplay: []\n    };\n  }\n\n  render() {\n    var userPostContent = [];\n\n    for (let x = 0; x < this.props.posts.length; x++) {\n      let post = this.props.posts[x];\n      let postedAt = new Date(post.postedAt);\n      this.props.posts[x].comments = post.comments = DbHelper.filter('comments', [['post_id', post._id]]).length;\n      let postUser = DbHelper.find('users', [['_id', post.user]]);\n      userPostContent.push(React.createElement(React.Fragment, {\n        key: postedAt,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 43\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"col-12\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 44\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"card\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 45\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"card-body\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 46\n        },\n        __self: this\n      }, React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 47\n        },\n        __self: this\n      }, post.content), React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 48\n        },\n        __self: this\n      }, React.createElement(\"small\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 48\n        },\n        __self: this\n      }, \"by \", React.createElement(\"strong\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 48\n        },\n        __self: this\n      }, React.createElement(Link, {\n        to: `/profile/${postUser._id}`,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 49\n        },\n        __self: this\n      }, postUser.name)), \" \", React.createElement(Moment, {\n        fromNow: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 49\n        },\n        __self: this\n      }, postedAt))), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 50\n        },\n        __self: this\n      }, React.createElement(\"span\", {\n        role: \"img\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 51\n        },\n        __self: this\n      }, \"\\uD83D\\uDCAC\"), \" \", React.createElement(\"a\", {\n        href: \"javascript:void(0)\",\n        onClick: () => {\n          this.commentDisplay(x);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 51\n        },\n        __self: this\n      }, post.comments, \" comments\"), this.state.commentDisplay && this.state.commentDisplay.indexOf(x) > -1 && React.createElement(Comments, {\n        key: postedAt,\n        post: post,\n        sendResponse: this.handelCommentResponse,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 53\n        },\n        __self: this\n      })))))));\n    }\n\n    return userPostContent;\n  }\n\n}\n\nexport default Posts;","map":{"version":3,"sources":["D:/MY_WORK/react-routing-test/src/components/elements/Posts.js"],"names":["React","Link","DbHelper","Comments","Moment","Posts","Component","constructor","props","commentDisplay","postIndex","commentdisplayArr","state","index","indexOf","push","splice","setState","handelCommentResponse","response","userPosts","posts","findIndex","i","_id","comments","render","userPostContent","x","length","post","postedAt","Date","filter","postUser","find","user","content","name"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport {DbHelper} from '../../DbHelper';\r\nimport Comments from './Comments';\r\nimport Moment from 'react-moment';\r\nclass Posts extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            commentDisplay:[]\r\n        }\r\n    }\r\n    commentDisplay = (postIndex) => {\r\n        let commentdisplayArr = this.state.commentDisplay;\r\n        let index = commentdisplayArr.indexOf(postIndex);\r\n        if (index === -1) {\r\n            commentdisplayArr.push(postIndex);\r\n        } else {\r\n            commentdisplayArr.splice(index, 1);\r\n        }\r\n\r\n        this.setState({ commentDisplay: commentdisplayArr })\r\n    }\r\n    handelCommentResponse = (response) => {\r\n        let userPosts = this.props.posts;\r\n        let postIndex = userPosts.findIndex((i) => {\r\n            return i._id === response;\r\n        })\r\n        this.props.posts[postIndex].comments = userPosts[postIndex].comments + 1;\r\n        // this.props.dispatch({\r\n        //     type: 'USER_POST',\r\n        //     userPosts\r\n        // })\r\n    }\r\n    render() {\r\n        var userPostContent = [];\r\n        for (let x = 0; x < this.props.posts.length; x++) {\r\n            let post = this.props.posts[x]\r\n            let postedAt = new Date(post.postedAt);\r\n            this.props.posts[x].comments = post.comments = DbHelper.filter('comments',[['post_id',post._id]]).length;\r\n            let postUser = DbHelper.find('users',[['_id',post.user]]);\r\n            userPostContent.push(\r\n                <React.Fragment key={postedAt}>\r\n                    <div className=\"col-12\">\r\n                        <div className=\"card\">\r\n                            <div className=\"card-body\">\r\n                                <p>{post.content}</p>\r\n                                <p><small>by <strong>\r\n                                    <Link to={`/profile/${postUser._id}`}>{postUser.name}</Link></strong> <Moment fromNow>{postedAt}</Moment></small></p>\r\n                                <div>\r\n                                    <span role=\"img\">💬</span> <a href=\"javascript:void(0)\" onClick={() => { this.commentDisplay(x) }}>{post.comments} comments</a>\r\n                                    {this.state.commentDisplay && this.state.commentDisplay.indexOf(x) > -1 &&\r\n                                        <Comments key={postedAt} post={post} sendResponse={this.handelCommentResponse} />\r\n                                    }\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div></React.Fragment>\r\n            )\r\n\r\n        }\r\n        return userPostContent;\r\n    }\r\n}\r\n\r\nexport default Posts;"]},"metadata":{},"sourceType":"module"}